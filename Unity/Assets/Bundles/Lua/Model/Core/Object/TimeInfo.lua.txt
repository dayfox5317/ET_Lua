-- Generated by CSharp.lua Compiler
local System = System
local ET
System.import(function (out)
  ET = out.ET
end)
System.namespace("ET", function (namespace)
  namespace.class("TimeInfo", function (namespace)
    local getTimeZone, setTimeZone, Update, ToDateTime, ClientNow, ServerNow, ClientFrameTime, ServerFrameTime, 
    Transition, Dispose, class, static, __ctor__
    static = function (this)
      this.Instance = class()
    end
    __ctor__ = function (this)
      this.dt1970 = System.DateTime(1970, 1, 1, 0, 0, 0, 0, System.DateTimeKind.Utc)
      this.dt = System.DateTime(1970, 1, 1, 0, 0, 0, 0, System.DateTimeKind.Utc)
      this.FrameTime = ClientNow(this)
    end
    getTimeZone = function (this)
      return this.timeZone
    end
    setTimeZone = function (this, value)
      this.timeZone = value
      this.dt = this.dt1970:AddHours(getTimeZone(this))
    end
    Update = function (this)
      this.FrameTime = ClientNow(this)
    end
    -- <summary>
    -- 根据时间戳获取时间
    -- </summary>
    ToDateTime = function (this, timeStamp)
      return this.dt:AddTicks(timeStamp * 10000)
    end
    ClientNow = function (this)
      return System.div((System.DateTime.getNow():getTicks() - this.dt1970:getTicks()), 10000)
    end
    ServerNow = function (this)
      return ClientNow(this) + ET.Game.getTimeInfo().ServerMinusClientTime
    end
    ClientFrameTime = function (this)
      return this.FrameTime
    end
    ServerFrameTime = function (this)
      return this.FrameTime + ET.Game.getTimeInfo().ServerMinusClientTime
    end
    Transition = function (this, d)
      return System.div((d:getTicks() - this.dt:getTicks()), 10000)
    end
    Dispose = function (this)
      class.Instance = nil
    end
    class = {
      base = function (out)
        return {
          System.IDisposable
        }
      end,
      timeZone = 0,
      getTimeZone = getTimeZone,
      setTimeZone = setTimeZone,
      ServerMinusClientTime = 0,
      FrameTime = 0,
      Update = Update,
      ToDateTime = ToDateTime,
      ClientNow = ClientNow,
      ServerNow = ServerNow,
      ClientFrameTime = ClientFrameTime,
      ServerFrameTime = ServerFrameTime,
      Transition = Transition,
      Dispose = Dispose,
      static = static,
      __ctor__ = __ctor__,
      __metadata__ = function (out)
        return {
          fields = {
            { "dt", 0x1, System.DateTime },
            { "dt1970", 0x1, System.DateTime },
            { "FrameTime", 0x6, System.Int64 },
            { "Instance", 0xE, class },
            { "timeZone", 0x1, System.Int32 }
          },
          properties = {
            { "ServerMinusClientTime", 0x6, System.Int64 },
            { "TimeZone", 0x106, System.Int32, getTimeZone, setTimeZone }
          },
          methods = {
            { ".ctor", 0x1, nil },
            { "ClientFrameTime", 0x86, ClientFrameTime, System.Int64 },
            { "ClientNow", 0x86, ClientNow, System.Int64 },
            { "Dispose", 0x6, Dispose },
            { "ServerFrameTime", 0x86, ServerFrameTime, System.Int64 },
            { "ServerNow", 0x86, ServerNow, System.Int64 },
            { "ToDateTime", 0x186, ToDateTime, System.Int64, System.DateTime },
            { "Transition", 0x186, Transition, System.DateTime, System.Int64 },
            { "Update", 0x6, Update }
          },
          class = { 0x6 }
        }
      end
    }
    return class
  end)
end)
