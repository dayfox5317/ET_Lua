-- Generated by CSharp.lua Compiler
local System = System
local ET = ET
local ETEventType = ET.EventType
local UnityEngine = UnityEngine
local ET
System.import(function (out)
  ET = out.ET
end)
System.namespace("ET", function (namespace)
  namespace.class("UnitFactory", function (namespace)
    local Create
    Create = function (domain, unitInfo)
      local unit = ET.EntityFactory.CreateWithId1(domain, unitInfo.UnitId, unitInfo.ConfigId, false, ET.Unit, System.Int32)
      unit:setPosition(UnityEngine.Vector3(unitInfo.X, unitInfo.Y, unitInfo.Z))

      unit:AddComponent2(ET.MoveComponent)
      local numericComponent = unit:AddComponent2(ET.NumericComponent)
      for i = 0, #unitInfo.Ks - 1 do
        numericComponent:Set2(ET.NumericType(unitInfo.Ks:get(i)), unitInfo.Vs:get(i))
      end

      unit:AddComponent2(ET.ObjectWait)

      unit:AddComponent2(ET.XunLuoPathComponent)

      local unitComponent = domain:GetComponent(ET.UnitComponent)
      ET.UnitComponentSystem.Add(unitComponent, unit)

      local default = ETEventType.AfterUnitCreate()
      default.Unit = unit
      ET.Game.getEventSystem():Publish(default, ETEventType.AfterUnitCreate)
      return unit
    end
    return {
      Create = Create,
      __metadata__ = function (out)
        return {
          methods = {
            { "Create", 0x28E, Create, out.ET.Entity, out.ET.UnitInfo, out.ET.Unit }
          },
          class = { 0xE }
        }
      end
    }
  end)
end)
