-- Generated by CSharp.lua Compiler
local System = System
local ET = ET
local ETEventType = ET.EventType
local ETCold = ETCold
local ET
System.import(function (out)
  ET = out.ET
end)
System.namespace("ET", function (namespace)
  namespace.class("Init", function (namespace)
    local Start, Update, LateUpdate, OnApplicationQuit
    Start = function ()
      System.try(function ()
        ET.TypeHelper.Init()

        ET.Game.getEventSystem():Init()
        ET.Log.Info("开始热更")

        -- 注册热更层回调
        ETCold.GameLoop.onUpdate = ETCold.GameLoop.onUpdate + Update
        ETCold.GameLoop.onLateUpdate = ETCold.GameLoop.onLateUpdate + LateUpdate
        ETCold.GameLoop.onApplicationQuit = ETCold.GameLoop.onApplicationQuit + OnApplicationQuit

        ET.ProtobufHelper.Init()



        ET.Game.Options = ET.Options()

        ET.Game.getEventSystem():Publish(ETEventType.AppStart(), ETEventType.AppStart):Coroutine()
      end, function (default)
        local _e = default
        ET.Log.Error1(_e)
      end)
    end
    Update = function ()
      ET.Game.Update()
    end
    LateUpdate = function ()
      ET.Game.LateUpdate()
    end
    OnApplicationQuit = function ()
      ETCold.GameLoop.onUpdate = ETCold.GameLoop.onUpdate - Update
      ETCold.GameLoop.onLateUpdate = ETCold.GameLoop.onLateUpdate - LateUpdate
      ETCold.GameLoop.onApplicationQuit = ETCold.GameLoop.onApplicationQuit - OnApplicationQuit
      ET.Game.Close()
    end
    return {
      Start = Start,
      Update = Update,
      LateUpdate = LateUpdate,
      OnApplicationQuit = OnApplicationQuit,
      __metadata__ = function (out)
        return {
          methods = {
            { "LateUpdate", 0xE, LateUpdate },
            { "OnApplicationQuit", 0xE, OnApplicationQuit },
            { "Start", 0xE, Start },
            { "Update", 0xE, Update }
          },
          class = { 0xE }
        }
      end
    }
  end)
end)
